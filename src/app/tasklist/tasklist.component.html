<div class="container-fluid">
    <div class="row">
        <div class="col">
            <label>Search</label>
            <input type="text" [(ngModel)]="searchparam.text"><button class="btn btn-primary"
                (click)="refresh()">Search</button>
            <button class="btn btn-secondary" (click)="resetSearch()">Reset</button>
            <button class="btn btn-outline-secondary" (click)="showfilter=!showfilter">Filter</button>
            <div *ngIf="showfilter">
                <label class="px-2">Starred</label><input type="checkbox" [(ngModel)]="searchparam.starredonly"
                    (change)="refresh()">
                <label class="px-2">Today</label><input type="checkbox" [(ngModel)]="searchparam.todayonly"
                    (change)="refresh()">
                <label class="px-2">Show done</label><input type="checkbox" [(ngModel)]="searchparam.showdone"
                    (change)="refresh()">
                <label class="px-2">Hide below</label><input width="40" type="number" [(ngModel)]="searchparam.hidebelow"
                    (change)="refresh()">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="alert alert-warning" role="alert" *ngIf="loadError">
                {{errorMessage}}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="alert alert-info" role="alert" *ngIf="isLoading">
                Aadatok betöltése folyamatban
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <!-- <h4>Tags</h4> -->
            <span *ngFor="let tag of tags">
                <button (click)="addFilterTag(tag)" class="btnsmall">{{tag}}</button>
            </span>
            <b>Selected</b>
            <span *ngFor="let tag of searchparam.tags">
                <td><button (click)="removeFilterTag(tag)" class="btnsmall">{{tag}}</button></td>
            </span>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <span *ngIf="!items">betöltés</span>
            <div *ngIf="items" class="table-responsive">
                <table class="table table-sm table-striped">
                    <thead>
                        <tr>
                            <th>S</th>
                            <th><span (click)="sorttask()">Task</span></th>
                            <th>Tags</th>
                            <th><span (click)="sortpriority()">P</span></th>
                            <th><span (click)="sortlength()">L</span></th>
                            <th><span (click)="sortvalue()">Pwr</span></th>
                            <th>*</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let element of items">
                            <td><span *ngIf="!element.starred" (click)="star(element.id)" class="px-1"><svg
                                        xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-star" viewBox="0 0 16 16">
                                        <path
                                            d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z" />
                                    </svg></span>
                                <span *ngIf="element.starred" (click)="star(element.id)" class="px-1"><svg
                                        xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-star-fill" viewBox="0 0 16 16">
                                        <path
                                            d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                                    </svg></span>
                                <span *ngIf="!element.fortoday" (click)="today(element.id)" class="px-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-calendar" viewBox="0 0 16 16">
                                        <path
                                            d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z" />
                                    </svg>
                                </span>
                                <span *ngIf="element.fortoday" (click)="today(element.id)" class="px-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-calendar-fill" viewBox="0 0 16 16">
                                        <path
                                            d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5h16V4H0V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5z" />
                                    </svg>
                                </span>
                            </td>
                            <td><a routerLink="/addedit/{{element.id}}">{{element.todotext}}</a></td>
                            <td>{{element.tags}}</td>
                            <td>{{element.priority}}</td>
                            <td>{{element.length}}</td>
                            <td>{{element.realvalue}}</td>
                            <td>
                                <!--<button class="btn btn-warning" (click)="delete(element.id)">Delete</button> -->
                                <button class="btn btn-sm btn-success" (click)="done(element.id)">Done</button>
                                <button class="btn btn-sm btn-outline-primary"
                                    (click)="archive(element.id)">Archive</button>
                                <app-delete-button [item]="element" (deleted)="delete($event.id)"></app-delete-button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>